# Trace tests

Trace tests can be generated by running

```
go generate .
```

with the relevant toolchain in this directory.

This will put the tests into a `staging` directory where the trace
reader tests will find them.
This directory must not be committed.
Instead, tests that you wish to keep should be moved into the directory
corresponding to the major Go version that produced that test.
Some generators are version-specific, and they're marked with a prefix
such as "go122".
Move those into the appropriate directories.

A subset of tests can be regenerated by specifying a regexp pattern for
the names of tests to generate in the `GOTRACETEST` environment
variable.
Test names are defined as the name of the `.go` file that generates the
trace, but with the `.go` extension removed.

Some generators are called "progs" and their `.go` filename (and thus
test name) has a `prog` prefix.
This indicates that the test is just a regular Go program that produces a
binary trace.
Other generators must produce a complete txtar-formatted test.
These generators are never version-specific.
