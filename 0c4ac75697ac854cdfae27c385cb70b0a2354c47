{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b1b4de67_3d4a9411",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14570
      },
      "writtenOn": "2023-07-24T16:33:36Z",
      "side": 1,
      "message": "Thanks for working on this! I agree something like it is necessary. \nCould we get by with something simpler, like using\n\n    return fmt.Sprintf(\"%s.%s\", obj.Pkg().Path(), obj.Name())\n    \nin objectString?",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61ea19eb_69decdd9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 64169
      },
      "writtenOn": "2023-07-24T17:04:53Z",
      "side": 1,
      "message": "In my opinion, a simplification of the code like this results in a less desirable user experience. It is helpful for the user reading the output to have the common prefix of package parts elided, to help them focus on the important bits.\n\nI present this example:\n\nSimplified version, always showing full path:\n```\n- github.com/hashicorp/vault/sdk/logical.Externaler: removed\n- github.com/hashicorp/vault/sdk/helper/ldaputil.LDAP.Dial: removed\n- github.com/hashicorp/vault/sdk/helper/ldaputil.LDAP.DialTLS: removed\n- github.com/hashicorp/vault/sdk/helper/ldaputil.LDAP.DialURL: added\n- github.com/hashicorp/vault/sdk/plugin.(*BackendPluginClient).IsExternal: removed\n```\n\nCurrent version, with relative path smarts:\n```\n- ./plugin.(*BackendPluginClient).IsExternal: removed\n- ./logical.Externaler: removed\n- ./helper/ldaputil.LDAP.Dial: removed\n- ./helper/ldaputil.LDAP.DialTLS: removed\n- ./helper/ldaputil.LDAP.DialURL: added\n```\n\nPerhaps the extra repeated text is somewhat tolerable when only looking at 5 lines (though I still find the second example clearer to read), but it really starts to matter if you have a longer fragment of apidiff output. I present this GitHub comment, in which I journalled the API differences in a library over time, using my modified version: https://github.com/hashicorp/vault/pull/21723#discussion_r1263427314 - imagine how much more cluttered, and how much additional line wrapping there would be, if every line included a repeat of the module path - and how it would be harder to skim-read for particular changes, as the important part would no longer be at the start of the line, next to the bullet.",
      "parentUuid": "b1b4de67_3d4a9411",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fccbd4fd_ee77d543",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14570
      },
      "writtenOn": "2023-07-24T18:21:13Z",
      "side": 1,
      "message": "I agree. But what about doing that trimming in messageSet.collect? Give it the common prefix and let it trim the output strings. \nThe advantage is that you won\u0027t have to plumb objectWithSide down through everything.\nDoes that work?",
      "parentUuid": "61ea19eb_69decdd9",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d92f7a2_9b073fd4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 64169
      },
      "writtenOn": "2023-07-24T18:52:05Z",
      "side": 1,
      "message": "I\u0027m afraid I do not follow the suggestion you are making.\n\nI\u0027m already plumbing objectWithSide as far as messageSet.collect now, so that messageSet.collect can decide which of the two prefixes it should select. Trying to do more in messageSet.collect won\u0027t change the distance that objectWithSide needs to travel.\n\nAlso, objectString is called from one other place besides messageSet.collect, where an object name needs to be calculated to be embedded in the string data of a message.\n\nI\u0027m pretty happy with the change as is, and don\u0027t see any obvious simplifications whilst maintaining the current behaviour.",
      "parentUuid": "fccbd4fd_ee77d543",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ba3b0f8_29b40ae8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14570
      },
      "writtenOn": "2023-07-24T18:56:11Z",
      "side": 1,
      "message": "OK, I see. You need to know the side to know which package path is the prefix; it\u0027s not always the same.",
      "parentUuid": "2d92f7a2_9b073fd4",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf82cff5_927ce6d1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2023-07-24T18:56:47Z",
      "side": 1,
      "message": "TryBots beginning. Status page: https://farmer.golang.org/try?commit\u003d0c4ac756\n",
      "tag": "autogenerated:trybots~beginning",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfcfef89_14c99bd4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2023-07-24T18:58:12Z",
      "side": 1,
      "message": "Build is still in progress... Status page: https://farmer.golang.org/try?commit\u003d0c4ac756\nFailed on linux-amd64: https://storage.googleapis.com/go-build-log/89a45784/linux-amd64_eff61122.log\nOther builds still in progress; subsequent failure notices suppressed until final report.\n\nConsult https://build.golang.org/ to see whether they are new failures. Keep in mind that TryBots currently test *exactly* your git commit, without rebasing. If your commit\u0027s git parent is old, the failure might\u0027ve already been fixed.\n",
      "parentUuid": "bf82cff5_927ce6d1",
      "tag": "autogenerated:trybots~progress",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59b3320f_f2a706b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5976
      },
      "writtenOn": "2023-07-24T18:58:50Z",
      "side": 1,
      "message": "3 of 3 TryBots failed.\nFailed on linux-amd64: https://storage.googleapis.com/go-build-log/89a45784/linux-amd64_eff61122.log\nFailed on windows-amd64-2016: https://storage.googleapis.com/go-build-log/89a45784/windows-amd64-2016_eeac9191.log\nFailed on linux-amd64-race: https://storage.googleapis.com/go-build-log/89a45784/linux-amd64-race_ea0c5cfa.log\n\nConsult https://build.golang.org/ to see whether they are new failures. Keep in mind that TryBots currently test *exactly* your git commit, without rebasing. If your commit\u0027s git parent is old, the failure might\u0027ve already been fixed.\n\n",
      "parentUuid": "bf82cff5_927ce6d1",
      "tag": "autogenerated:trybots~failed",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f120872_4192a0a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14570
      },
      "writtenOn": "2023-07-24T19:04:18Z",
      "side": 1,
      "message": "You\u0027ll need to change the expected test output in cmd/gorelease:\n\n--- FAIL: TestRelease (0.04s)\n    --- FAIL: TestRelease/private/break (0.13s)\n        gorelease_test.go:432: got:\n            # example.com/private/p\n            ## incompatible changes\n            example.com/private/internal/i.I.Foo: added\n            \n            # summary\n            Cannot suggest a release version.\n            Incompatible changes were detected.\n            \n            want:\n            # example.com/private/p\n            ## incompatible changes\n            I.Foo: added\n            \n            # summary\n            Cannot suggest a release version.\n            Incompatible changes were detected.\nFAIL\nFAIL\tgolang.org/x/exp/cmd/gorelease\t1.604s",
      "parentUuid": "59b3320f_f2a706b7",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f562875_0a89907a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 64169
      },
      "writtenOn": "2023-07-24T19:06:11Z",
      "side": 1,
      "message": "Thanks, I\u0027ll look into it. I did **attempt** to run `go test ./...` on my change before submitting, but I got unrelated test failures in the gorelease tests, with or without my change.\n\nI\u0027ll try to figure out what is going on.",
      "parentUuid": "9f120872_4192a0a5",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30b3cc7a_ef03c143",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14570
      },
      "writtenOn": "2023-07-24T19:08:34Z",
      "side": 1,
      "message": "Pretty sure there is a constant chunk of text in that test that is missing the package path you added. If it\u0027s any more complicated than that let me know.",
      "parentUuid": "4f562875_0a89907a",
      "revId": "0c4ac75697ac854cdfae27c385cb70b0a2354c47",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}