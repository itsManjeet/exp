{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "46999e32_d5d4a14c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "This is looking good, thanks for working on it! A few more comments, mostly small stuff.\n\nYou might find this interesting: a couple weeks ago, I wrote a blog post on error handling in Go, inspired by work in gorelease and cmd/go. It talks about when to use sentinel values, errors, and panics; how to format errors; how and when to wrap errors. https://jayconrod.com/posts/116/error-handling-guidelines-for-go",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62140c4b_32e13fb4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Thank you! I had skimmed it before, but took more time to carefully read it this time. The switch at the top is very useful.",
      "parentUuid": "46999e32_d5d4a14c",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06020d27_cbf29d7c",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "s/latest/highest/",
      "range": {
        "startLine": 251,
        "startChar": 51,
        "endLine": 251,
        "endChar": 57
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3e717e67_dc98da7f",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "06020d27_cbf29d7c",
      "range": {
        "startLine": 251,
        "startChar": 51,
        "endLine": 251,
        "endChar": 57
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b289d0d_6bfe42c9",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 392,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "s/latestVersion/highestVersion/\n\nselectedVersion would also be fine.",
      "range": {
        "startLine": 392,
        "startChar": 1,
        "endLine": 392,
        "endChar": 14
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "365d6b38_6b5f90d0",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 392,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b289d0d_6bfe42c9",
      "range": {
        "startLine": 392,
        "startChar": 1,
        "endLine": 392,
        "endChar": 14
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b00dbd76_494929b7",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 1140,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "Might be able to simplify this a little more by setting the output format so that it only includes the version. Something like:\n\n  cmd :\u003d exec.Command(\"go\", \"list\", \"-m\", \"-f\", \"{{.Version}}\", \"--\", modPath)\n  cmd.Dir \u003d modDir\n  out, err :\u003d cmd.Output()\n  if err !\u003d nil {\n    return \"\", cleanCmdError(err)\n  }\n  return string(out), nil",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8128a5fe_2e7673f9",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 1140,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Played around with this a bit. Just to clarify: does it always give the highest version of `modPath` in the dependency graph, or exit code 1 if not in the graph?",
      "parentUuid": "b00dbd76_494929b7",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c862fca_c741b6f9",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 1140,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T18:31:59Z",
      "side": 1,
      "message": "It should always give the highest version in the dependency graph. It would exit 1 if it\u0027s not in the graph, but since we\u0027re always directly requiring some version that should never happen. So the question is whether it returns the version we required or a higher version.",
      "parentUuid": "8128a5fe_2e7673f9",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68423596_dd9b0a75",
        "filename": "cmd/gorelease/gorelease.go",
        "patchSetId": 4
      },
      "lineNbr": 1140,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T22:07:50Z",
      "side": 1,
      "message": "Done\n\nThank you, that makes perfect sense.",
      "parentUuid": "7c862fca_c741b6f9",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c65bee8_f7546c3d",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 197,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "Rephrase:\n\n  Module indirectly depends on a higher version of itself (%s).\n\nI\u0027m not sure we should recommend releasing a higher version. If higher versions already exist, the user is probably trying to patch an old release branch, so releasing a higher version might be possible. They probably need to cut the dependency instead, but it\u0027s not easy for us to say what to do, so let\u0027s just describe the problem.",
      "range": {
        "startLine": 196,
        "startChar": 15,
        "endLine": 197,
        "endChar": 51
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f8e4ebaf_60dfac25",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 197,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Done\n\nGood call. I do expect some confusion around this, but waiting to see what users want is probably prudent.",
      "parentUuid": "0c65bee8_f7546c3d",
      "range": {
        "startLine": 196,
        "startChar": 15,
        "endLine": 197,
        "endChar": 51
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6dd2ea1_771835d7",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 203,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "Let\u0027s call setNotValid instead of returning an error. We\u0027ll call setNotValid in general if it\u0027s not appropriate to suggest a new version.",
      "range": {
        "startLine": 203,
        "startChar": 41,
        "endLine": 203,
        "endChar": 46
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "edb8f272_a7fe082c",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 203,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e6dd2ea1_771835d7",
      "range": {
        "startLine": 203,
        "startChar": 41,
        "endLine": 203,
        "endChar": 46
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20e8c1bd_008f58ae",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 229,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "Rephrase: \n\n  Module indirectly depends on a higher version of itself (%s) than the base version (%s).",
      "range": {
        "startLine": 229,
        "startChar": 22,
        "endLine": 229,
        "endChar": 136
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f4c227e_ef2b4b0f",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 229,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "20e8c1bd_008f58ae",
      "range": {
        "startLine": 229,
        "startChar": 22,
        "endLine": 229,
        "endChar": 136
      },
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12391215_73436154",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 235,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "panic is okay. The base version should have been validated before this point, so this acts as an assertion.",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31603401_2d2ead3a",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 235,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Ack\n\nThanks for the reasoning!",
      "parentUuid": "12391215_73436154",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0bd4671a_bcccd6e5",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 249,
      "author": {
        "id": 17092
      },
      "writtenOn": "2021-01-26T15:40:07Z",
      "side": 1,
      "message": "Same deal: panic is okay because we should have validate the module path before this point.",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f54931f1_dafb8f2a",
        "filename": "cmd/gorelease/report.go",
        "patchSetId": 4
      },
      "lineNbr": 249,
      "author": {
        "id": 26615
      },
      "writtenOn": "2021-01-26T16:38:10Z",
      "side": 1,
      "message": "Ack\n\nThanks for the reasoning!",
      "parentUuid": "0bd4671a_bcccd6e5",
      "revId": "a312d5dbdf6816629424e8685757cd0a89016789",
      "serverId": "62eb7196-b449-3ce5-99f1-c037f21e1705"
    }
  ]
}